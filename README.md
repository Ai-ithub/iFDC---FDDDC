# 🛢️ Software Requirements Specification (SRS)

## 💡 سیستم پایش آسیب‌سازند در حفاری و سیمان‌کاری (FDMS)

---

## 1. معرفی

### 1.1 هدف
هدف این سند، تعریف نیازمندی‌های سیستم هوشمند FDMS است که وظیفه‌ی پایش بلادرنگ، شبیه‌سازی سه‌بعدی و پیش‌بینی آسیب‌های سازند را در عملیات حفاری و سیمان‌کاری برعهده دارد. این سیستم با استفاده از داده‌های MWD/LWD و یادگیری ماشین توسعه یافته است.

### 1.2 دامنه سیستم
FDMS به عنوان یک سیستم یکپارچه شامل موتور تحلیل داده، مدل‌های یادگیری ماشین، موتور شبیه‌سازی سه‌بعدی و داشبورد مدیریتی تعاملی طراحی شده است. این سیستم با هدف پایش بلادرنگ، تحلیل پیش‌بینانه و بهینه‌سازی تصمیم‌گیری عملیاتی در فرآیندهای حفاری و سیمان‌کاری توسعه یافته و قابلیت استفاده در هر دو محیط Onshore و Offshore را دارا می‌باشد.

### 1.3 تعاریف و اختصارات
| اصطلاح | توضیح |
|--------|-------|
| MWD | Measurement While Drilling |
| LWD | Logging While Drilling |
| ECD | Equivalent Circulating Density |
| OBM/WBM | Oil/Water Based Mud |
| SHAP | SHapley Additive exPlanations |
| FDMS | Formation Damage Monitoring System |

---

## 2. شرح کلی

### 2.1 چشم‌انداز
FDMS نقش مهمی در پیشگیری از آسیب‌های سازند دارد و می‌تواند با ارائه‌ی پیش‌بینی‌های بلادرنگ و شبیه‌سازی‌های تعاملی، تصمیم‌گیری اپراتورها را بهبود بخشد.

### 2.2 ویژگی‌های اصلی
- ⏱️ پردازش بلادرنگ داده‌های حفاری (MWD/LWD)
- 🤖 پیش‌بینی هوشمند تلفات سیال و امولسیون
- 🖥️ شبیه‌سازی 3D سازند
- 📊 داشبورد مدیریتی با هشدار هوشمند

### 2.3 محدودیت‌ها
- نیاز به کیفیت بالای داده‌های حفاری
- وابستگی به GPU برای آموزش مدل‌ها
- نیاز به پایدار بودن شبکه در سایت

---

## 3. نیازمندی‌های عملکردی (FR)

### 3.1 پیش‌بینی ریسک تلفات سیال
- [FR-1.1] استفاده از مدل XGBoost برای پیش‌بینی ریسک
- [FR-1.2] تحلیل اهمیت ویژگی‌ها با SHAP
- [FR-1.3] نمایش گرافیکی نتایج در داشبورد

### 3.2 تشخیص امولسیون حفاری
- [FR-2.1] دریافت سری زمانی از ویسکوزیته، دما، نرخ برش
- [FR-2.2] استفاده از LSTM برای تشخیص تشکیل امولسیون
- [FR-2.3] هشدار بلادرنگ در صورت شناسایی خطر

### 3.3 شبیه‌سازی سه‌بعدی سازند
- [FR-3.1] نمایش سازند تحت تنش با Unity3D
- [FR-3.2] امکان تعامل اپراتور با مدل بصری

### 3.4 داشبورد مدیریتی
- [FR-4.1] نمایش فشار، دما، سرعت چرخش، ECD
- [FR-4.2] سیستم هشدار در صورت تجاوز از آستانه
- [FR-4.3] پیشنهادات عملیاتی بر اساس تحلیل ML

---

## 4. نیازمندی‌های غیرعملکردی (NFR)

| کد | نیازمندی | توضیح |
|-----|----------|--------|
| NFR-1 | کارایی | پردازش داده حفاری با نرخ حداقل 1Hz |
| NFR-2 | پایداری | ادامه عملکرد در صورت قطعی اتصال |
| NFR-3 | توسعه‌پذیری | ماژولار بودن معماری ML و UI |
| NFR-4 | امنیت | رمزنگاری تبادل داده و احراز هویت |
| NFR-5 | نگهداری‌پذیری | مستندسازی کامل و تست‌پذیری |

---

## 5. نیازمندی‌های داده

### 5.1 ساختار داده پیشنهادی (نمونه‌ای برای 10 چاه)
```csv
well_id, lat, lon, datetime, depth, mud_type, rpm, spp, flow_rate, viscosity, temperature, ecd, shale_index, bit_type, lithology, cuttings_concentration, ph, cl_concentration, oil_water_ratio, emulsion_detected, lost_circulation, casing_pressure, annular_pressure
```

### 5.2 منابع داده
- داده‌های میدانی واقعی از چاه‌های حفاری‌شده
- داده‌های مصنوعی با الگوریتم‌های تولید سری زمانی (TimeGAN, SynthFlow)

---

## 6. نمودارهای سطح بالا

### 6.1 معماری سیستم
```
[Data Acquisition] → [Processing Layer (Python/C++)]
                   → [ML Models: XGBoost, LSTM]
                   → [3D Simulator: Unity]
                   → [Backend API: FastAPI]
                   → [Frontend Dashboard: React + Plotly]
```

### 6.2 دیاگرام تعامل کاربر
```
[User] ⇄ [Dashboard] ⇄ [Backend API] ⇄ [ML Engine / 3D Simulator / DB]
```

---

## 7. پیوست‌ها

- راهنمای نصب اولیه:
  ```bash
  pip install -r requirements.txt
  uvicorn app.main:app --reload
  python train_fluid_loss_model.py
  ```

- مسیر پوشه‌ها:
  ```
  📁 data/ ← داده‌های حفاری
  📁 models/ ← مدل‌های آموزش‌دیده
  📁 simulation/ ← شبیه‌سازی Unity
  📁 dashboard/ ← فرانت‌اند React و API
  📁 notebooks/ ← تحلیل‌ها و آزمایش‌ها
  ```

- اطلاعات تماس برای همکاری‌های میدانی یا توسعه:
  ```
  📧 info@fdms.ai
  ☎️ +98-21-XXXXXXX
  ```
